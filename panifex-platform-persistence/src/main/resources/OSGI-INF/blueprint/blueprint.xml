<?xml version="1.0" encoding="UTF-8"?>
<blueprint default-activation="lazy"
	xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:jpa="http://aries.apache.org/xmlns/jpa/v1.0.0" xmlns:tx="http://aries.apache.org/xmlns/transactions/v1.0.0">

	<bean id="panifexServicesBeanJPA-CM"
		class="org.panifex.platform.persistence.security.AccountRepositoryImpl"
		init-method="init">
		<jpa:context property="entityManager" unitname="panifex-cm" />
		<tx:transaction method="*" value="Required" />
	</bean>

	<service id="panifexServicesJPA-CM" ref="panifexServicesBeanJPA-CM"
		interface="org.panifex.platform.api.security.AccountRepository">
		<service-properties>
			<entry key="mode" value="JPA_CM" />
		</service-properties>
	</service>


	<!-- Liquibase service ->

	<bean id="liquibase" class="liquibase.integration.spring.SpringLiquibase">
		<property name="dataSource" ref="dataSource" />
		<property name="changeLog"
			value="classpath:/db-changelog/db.changelog-master.xml" />
		<property name="dropFirst" value="false" />
	</bean>

	<reference id="dataSource" interface="javax.sql.DataSource"
		filter="(osgi.jndi.service.name=jdbc/PanifexDataSource)" />-->

</blueprint>
